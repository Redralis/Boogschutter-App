// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  email          String              @id @unique
  password       String
  firstName      String
  lastName       String
  bondNumber     Int?
  isAdmin        Boolean
  isTrainer      Boolean
  isMatchLeader  Boolean
  phoneNumber    String?
  events         eventParticipants[]
  forgotPassword forgotPassword[]
}

model eventParticipants {
  user      User   @relation(fields: [userEmail], references: [email], onDelete: Cascade, onUpdate: Cascade)
  userEmail String
  event     Event  @relation(fields: [eventId], references: [eventId], onDelete: Cascade, onUpdate: Cascade)
  eventId   Int

  @@id([userEmail, eventId])
}

model Event {
  eventId           Int                 @id @default(autoincrement())
  eventParticipants eventParticipants[]
  eventName         String
  date              Int
  description       String
  maxParticipants   Int?
  type              String
}

model forgotPassword {
  ForgotPasswordUserEmail String
  token                   String @id @unique
  user                    User   @relation(fields: [ForgotPasswordUserEmail], references: [email])
}
